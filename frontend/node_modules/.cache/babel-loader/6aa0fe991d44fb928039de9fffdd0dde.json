{"ast":null,"code":"var _jsxFileName = \"/Users/apple/mu-grievance-redessal-portal/frontend/src/pages/HomePage/HomePage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from \"react\";\nimport jwtDecode from \"jwt-decode\";\nimport { useMutation } from \"react-query\";\nimport Navbar from \"components/PublicNavbar/PublicNavbar\";\nimport RegisterForm from \"components/RegisterForm/RegisterForm\";\nimport LoginForm from \"components/LoginForm/LoginForm\";\nimport Context from \"context/context\";\nimport { registerUser, loginUser, setAuthorizationHeader, verifyUser } from \"APIs/user\";\nimport { errorMessage, successMessage } from \"utils/modalMessage\";\nimport { validObject } from \"utils/validObject\";\nimport { OtpOnlyModal } from \"components/CustomModals/CustomModals\";\nimport { login } from \"context/actions\";\nimport { ReactComponent as Bg } from \"@svgr/webpack?-svgo,+titleProp,+ref!assets/bg.svg\";\nimport \"./HomePage.scss\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HomePage = () => {\n  _s();\n  const [type, setType] = useState(() => \"LOGIN\");\n  const [showVerifyModal, setShowVerifyModal] = useState(false);\n  const [otpModalTitle, setOtpModalTitle] = useState(\"An OTP has been sent to your Email ID. Enter that OTP here to successfully register.\");\n  const {\n    dispatch\n  } = useContext(Context);\n  const [registerMutation, {\n    isLoading: registerLoading\n  }] = useMutation(registerUser, {\n    onSuccess: () => {\n      setShowVerifyModal(true);\n    },\n    onError: ({\n      response\n    }) => errorMessage(validObject(response) && response.data)\n  });\n  const [loginMutation, {\n    isLoading: loginLoading\n  }] = useMutation(loginUser, {\n    onError: ({\n      response\n    }) => {\n      if (validObject(response) && response.data.toLowerCase().includes(\"verify\")) {\n        setShowVerifyModal(true);\n        setOtpModalTitle(response.data);\n      } else {\n        errorMessage(validObject(response) && response.data);\n      }\n    },\n    onSuccess: token => {\n      const {\n        userType,\n        id,\n        imageUrl\n      } = jwtDecode(token);\n      localStorage.setItem(\"userType\", userType);\n      localStorage.setItem(\"id\", id);\n      localStorage.setItem(\"imageUrl\", imageUrl);\n      setAuthorizationHeader(token, userType);\n      dispatch(login(userType));\n    }\n  });\n  const [verifyMutation, {\n    isLoading: verifyLoading\n  }] = useMutation(verifyUser, {\n    onSuccess: ({\n      data: {\n        message\n      }\n    }) => {\n      setShowVerifyModal(false);\n      successMessage(message);\n      setType(\"LOGIN\");\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(OtpOnlyModal, {\n      title: otpModalTitle,\n      onSubmit: verifyMutation,\n      visible: showVerifyModal,\n      loading: verifyLoading,\n      onCancel: () => {\n        setShowVerifyModal(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"HomePage\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"HomePage__content animate__animated animate__fadeIn\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"HomePage__bg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"animate__animated animate__slideInUp\",\n            children: \"We are here to help you.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Bg, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"HomePage__form\",\n          children: type === \"LOGIN\" ? /*#__PURE__*/_jsxDEV(LoginForm, {\n            loading: loginLoading,\n            onSubmit: loginMutation,\n            setType: setType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(RegisterForm, {\n            loading: registerLoading,\n            onSubmit: registerMutation,\n            setType: setType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(HomePage, \"f/bV6w+yjsu22Elv83yHSq2SmJM=\", false, function () {\n  return [useMutation, useMutation, useMutation];\n});\n_c = HomePage;\nexport default HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useContext","useState","jwtDecode","useMutation","Navbar","RegisterForm","LoginForm","Context","registerUser","loginUser","setAuthorizationHeader","verifyUser","errorMessage","successMessage","validObject","OtpOnlyModal","login","ReactComponent","Bg","jsxDEV","_jsxDEV","Fragment","_Fragment","HomePage","_s","type","setType","showVerifyModal","setShowVerifyModal","otpModalTitle","setOtpModalTitle","dispatch","registerMutation","isLoading","registerLoading","onSuccess","onError","response","data","loginMutation","loginLoading","toLowerCase","includes","token","userType","id","imageUrl","localStorage","setItem","verifyMutation","verifyLoading","message","children","title","onSubmit","visible","loading","onCancel","fileName","_jsxFileName","lineNumber","columnNumber","className","_c","$RefreshReg$"],"sources":["/Users/apple/mu-grievance-redessal-portal/frontend/src/pages/HomePage/HomePage.jsx"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport jwtDecode from \"jwt-decode\";\nimport { useMutation } from \"react-query\";\nimport Navbar from \"components/PublicNavbar/PublicNavbar\";\nimport RegisterForm from \"components/RegisterForm/RegisterForm\";\nimport LoginForm from \"components/LoginForm/LoginForm\";\nimport Context from \"context/context\";\nimport { registerUser, loginUser, setAuthorizationHeader, verifyUser } from \"APIs/user\";\nimport { errorMessage, successMessage } from \"utils/modalMessage\";\nimport { validObject } from \"utils/validObject\";\nimport { OtpOnlyModal } from \"components/CustomModals/CustomModals\";\nimport { login } from \"context/actions\";\nimport { ReactComponent as Bg } from \"assets/bg.svg\";\n\nimport \"./HomePage.scss\";\n\nconst HomePage = () => {\n  const [type, setType] = useState(() => \"LOGIN\");\n  const [showVerifyModal, setShowVerifyModal] = useState(false);\n  const [otpModalTitle, setOtpModalTitle] = useState(\"An OTP has been sent to your Email ID. Enter that OTP here to successfully register.\");\n  const { dispatch } = useContext(Context);\n\n  const [registerMutation, { isLoading: registerLoading }] = useMutation(registerUser, {\n    onSuccess: () => {\n      setShowVerifyModal(true);\n    },\n    onError: ({ response }) => errorMessage(validObject(response) && response.data),\n  });\n\n  const [loginMutation, { isLoading: loginLoading }] = useMutation(loginUser, {\n    onError: ({ response }) => {\n      if (validObject(response) && response.data.toLowerCase().includes(\"verify\")) {\n        setShowVerifyModal(true);\n        setOtpModalTitle(response.data);\n      } else {\n        errorMessage(validObject(response) && response.data);\n      }\n    },\n    onSuccess: (token) => {\n      const { userType, id, imageUrl } = jwtDecode(token);\n      localStorage.setItem(\"userType\", userType);\n      localStorage.setItem(\"id\", id);\n      localStorage.setItem(\"imageUrl\", imageUrl);\n      setAuthorizationHeader(token, userType);\n      dispatch(login(userType));\n    },\n  });\n\n  const [verifyMutation, { isLoading: verifyLoading }] = useMutation(verifyUser, {\n    onSuccess: ({ data: { message } }) => {\n      setShowVerifyModal(false);\n      successMessage(message);\n      setType(\"LOGIN\");\n    },\n  });\n\n  return (\n    <>\n      <OtpOnlyModal\n        title={otpModalTitle}\n        onSubmit={verifyMutation}\n        visible={showVerifyModal}\n        loading={verifyLoading}\n        onCancel={() => {\n          setShowVerifyModal(false);\n        }}\n      />\n      <div className=\"HomePage\">\n        <Navbar />\n        <div className=\"HomePage__content animate__animated animate__fadeIn\">\n          <div className=\"HomePage__bg\">\n            <h1 className=\"animate__animated animate__slideInUp\">We are here to help you.</h1>\n            <Bg />\n          </div>\n          <div className=\"HomePage__form\">\n            {type === \"LOGIN\" ? (\n              <LoginForm loading={loginLoading} onSubmit={loginMutation} setType={setType} />\n            ) : (\n              <RegisterForm loading={registerLoading} onSubmit={registerMutation} setType={setType} />\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\nexport default HomePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}